<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <title>
    Animating the Year In Art // Artsy Engineering
  </title>

  <link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="content-type" content="text/html; charset=utf-8">


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="eve">
<meta name="generator" content="Hugo 0.26" />

  <meta property="og:title" content="Animating the Year In Art" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />
<meta property="og:url" content="https://hizkifw.github.io/artsy.github.io-hugo/2017/02/01/year-in-art/" />


  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/base-min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/pure-min.css">
  
  
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.5.0/grids-responsive-min.css">
  
  

  <link rel="stylesheet" href="https://hizkifw.github.io/artsy.github.io-hugo/css/redlounge.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='//fonts.googleapis.com/css?family=Raleway:400,200,100,700,300,500,600,800' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Libre+Baskerville:400,700,400italic' rel='stylesheet' type='text/css'>

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/touch-icon-144-precomposed.png">
  <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Artsy Engineering" />

    
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/tomorrow-night-bright.min.css">
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>


  

  

  

  
</head>

<body>
	

	<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
  <div class="header">
    

	

    
    

    <nav class="nav">
      <ul class="nav-list">
        <li class="nav-item"><span class="nav-item-separator">//</span><a href="https://hizkifw.github.io/artsy.github.io-hugo">Home</a></li>
        
      </ul>
    </nav>

    

  </div>
</div>

	
	

    <div class="content pure-u-1 pure-u-md-3-4">
		<a name="top"></a>
		

		
			
	    
  		<section class="post">
            <h1 class="post-title">
              <a href="/artsy.github.io-hugo/2017/02/01/year-in-art/">Animating the Year In Art</a>
            </h1>
            <h3 class="post-subtitle">
            	
            </h3>
            
            	<span class="post-date">
                	<span class="post-date-day"><sup>1</sup></span><span class="post-date-separator">/</span><span class="post-date-month">Feb</span> <span class="post-date-year">2017</span>
            	</span>
            	
            
            	
            		<span class="post-author-single">By <a class="post-author"  target="">eve</a></span>
            		




            	
            

			
			
				<div class="post-categories">
				
					<a class="post-category post-category-javascript" href="https://hizkifw.github.io/artsy.github.io-hugo/categories/javascript">javascript</a>
				
				</div>
			

			

			

            <p>Artsy&rsquo;s end of year features are an annual chance to walk through highlights of the year while also exploring front-end experiments. Created in collaboration with UBS and designed by Owen Dodd, <a href="https://www.artsy.net/2016-year-in-art">The Year In Art 2016</a> presents an interactive timeline of singular moments in art and culture over the past year.</p>

<p><img src="/images/2017-02-01-year-in-art/blog-eoy-headeranimation.gif" alt="2017 Year In Art Animation Sample" /></p>

<p>The piece opens with header animation, a series of transparent sliding boxes that presented a unique challenge. The finalized look is somewhat like a slinky- a stack of containers that are stretched open from the bottom, and compress again as they reach the top of the viewport, collapsing inward without ever crossing outside the screen.</p>

<p>Achieving this effect required animating elements in response both to the size of other elements in the viewport, and to the client’s scroll interactions, all while sitting transparently over a video background.</p>

<p></p>

<p>Because each element in the animation opens out from the center, and because the entire container is transparent, the sections needed to adjust their height rather than simply sliding out of view. Furthermore, the entire animation needed to be responsive, and able to adjust it’s place easily on page when refreshing or resized.</p>

<p>Essentially we needed a way to know where in our scroll position the top of each section &lsquo;enters&rsquo; the window, which is also the point at which it should become visible. This functionality is close to <a href="https://github.com/imakewebthings/waypoints">Waypoints</a>, a library we use often at Artsy, but that option wasn&rsquo;t going to work in this case. Because each section was actually in the viewport already, just at 0px tall, the library wouldn’t recognize an element&rsquo;s ‘entering’ the frame (because it’s already there).</p>

<p><img src="/images/2017-02-01-year-in-art/blog-eoy-diagram.png" alt="DOM Element Diagram" /></p>

<p>The sections we would be animating were a known element- we had 10 pieces of content with a target height of 33% of the container. Additionally, a title card would be included at a different dimension, 100% container height.</p>

<p>So how can we establish when each element should be visible?</p>

<p>First we can declare the expected heights for each section:</p>

<pre><code class="language-coffeescript">setupSliderHeight: =&gt;
   #height of bounding container (and title section)
   @containerHeight = @windowHeight - @headerHeight

   #height of a single open section
   @activeHeight = @windowHeight - @headerHeight - (@windowHeight * .33)
</code></pre>

<p>Next, we need to find at what scroll position each element should appear. Using the getScrollZones method below, we are able to return an array of ‘zones’ corresponding to the top each section.</p>

<pre><code class="language-coffeescript">getScrollZones: (sections)  =&gt;
    scrollZones = []
    scrollZones.push @containerHeight  #title section
    for i in sections
      scrollZones.push( ( (i + 1) * @activeHeight) + @containerHeight + 20)
    return scrollZones
</code></pre>

<p>getScrollZones returns an array from which we are also able to deduce another important variable, the height of the entire container if each section were ‘active’ or open:</p>

<pre><code class="language-coffeescript">	@openHeight = @getScrollZones().last + @headerHeight
</code></pre>

<p>Our container is a fixed position box, but to simulate scrolling, we can put it inside another container whose height corresponds to @openHeight, allowing us to scroll the full length or our ‘scrollZones’ without any visible change on screen.</p>

<p>Now that we’re able to scroll, how do we know where we are?  This calls for another method, called as the user scrolls, to constantly let us know which element in our animation should be active.</p>

<pre><code class="language-coffeescript"> closestSection: (scrollTop, scrollZones) =&gt;
    closest = Math.max.apply(null, scrollZones)
    for i in [0..(scrollZones.length - 1)]
      if scrollZones[i] &gt;= scrollTop and scrollZones[i] &lt; closest
        closest = i
    return closest
</code></pre>

<p>This method gives us the index of the section nearest to the top of our window at any given moment, allowing us to identify and manipulate both the active element and the ones immediately surrounding it. Check out the full implementation of this project on <a href="https://github.com/artsy/force/tree/master/apps/editorial_features/components/eoy">GitHub</a>.</p>

<p>Additionally, be sure to check out previous features created by Artsy in collaboration with UBS:</p>

<ul>
<li><a href="https://www.artsy.net/venice-biennale-2015">Venice Biennale 2015</a></li>
<li><a href="https://www.artsy.net/2015-year-in-art">2015 Year in Art</a>..</li>
<li><a href="https://www.artsy.net/article/artsy-editorial-uncovering-the-surprisingly-secret-world-of-art-auctions">Video Series: The Art Market (in Four Parts)</a></li>
</ul>
	
			

			

			
				<div class="paging">
					<span class="paging-label">More Reading</span>
					
					<div class="paging-newer">
						<span class="dark-red">Newer</span><span class="decorative-marker">//</span>
						<a class="paging-link" href="/artsy.github.io-hugo/2017/02/05/Retrospective-Swift-at-Artsy/">Retrospective: Swift at Artsy</a>
		            </div>
		            

					
					<div class="paging-older">
						<span class="dark-red">Older</span><span class="decorative-marker">//</span>
			            <a class="paging-link" href="/artsy.github.io-hugo/2017/01/25/mashing-maps/">Mashing Data, Making Maps</a>
		            </div>
		            
	            </div>
            
          </section>
          
          	
          
        
      <div class="footer">
	<hr class="thin" />
	<div class="pure-menu pure-menu-horizontal pure-menu-open">
		<ul class="footer-menu">
		
		</ul>
	</div>

	<p>&copy; 2017. All rights reserved.</p>
</div>
    </div>
  </div>
	

	

  
</body>
</html>
