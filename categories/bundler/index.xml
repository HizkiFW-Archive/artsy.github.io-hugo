<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Bundler on Artsy Engineering</title>
    <link>https://hizkifw.github.io/artsy.github.io-hugo/categories/bundler/</link>
    <description>Recent content in Bundler on Artsy Engineering</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 15 Jan 2013 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="https://hizkifw.github.io/artsy.github.io-hugo/categories/bundler/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Debugging Bundler Issues on Heroku</title>
      <link>https://hizkifw.github.io/artsy.github.io-hugo/2013/01/15/debugging-bundler-issues-with-heroku/</link>
      <pubDate>Tue, 15 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>https://hizkifw.github.io/artsy.github.io-hugo/2013/01/15/debugging-bundler-issues-with-heroku/</guid>
      <description>&lt;p&gt;A few days ago we have started seeing the Heroku deployments of one of our applications randomly hang during &lt;code&gt;bundle install&lt;/code&gt;. The problem worsened with time and we were not able to do a deployment for days.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ git push -f git@heroku.com:application.git FETCH_HEAD:master
-----&amp;gt; Deleting 12 files matching .slugignore patterns.
-----&amp;gt; Ruby/Rails app detected
-----&amp;gt; Using Ruby version: ruby-1.9.3
-----&amp;gt; Installing dependencies using Bundler version 1.3.0.pre.5
       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin
       Fetching gem metadata from http://rubygems.org/.......
       Fetching gem metadata from http://rubygems.org/..
/app/slug-compiler/lib/utils.rb:66:in `block (2 levels) in spawn&#39;: command=&#39;/app/slug-compiler/lib/../../tmp/buildpacks/ruby/bin/compile /tmp/build_1p6071sni4hh1 /app/tmp/repo.git/.cache&#39; exit_status=0 out=&#39;&#39; at=timeout elapsed=900.1056394577026 (Utils::TimeoutError)
  from /app/slug-compiler/lib/utils.rb:52:in `loop&#39;
  from /app/slug-compiler/lib/utils.rb:52:in `block in spawn&#39;
  from /app/slug-compiler/lib/utils.rb:47:in `popen&#39;
  from /app/slug-compiler/lib/utils.rb:47:in `spawn&#39;
  from /app/slug-compiler/lib/buildpack.rb:37:in `block in compile&#39;
  from /app/slug-compiler/lib/buildpack.rb:35:in `fork&#39;
  from /app/slug-compiler/lib/buildpack.rb:35:in `compile&#39;
  from /app/slug-compiler/lib/slug.rb:497:in `block in run_buildpack&#39;
 !     Heroku push rejected, failed to compile Ruby/rails app
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Seeing bundler hang on &amp;ldquo;Fetching gem metadata from &lt;a href=&#34;http://rubygems.org/&amp;quot;&#34;&gt;http://rubygems.org/&amp;quot;&lt;/a&gt;, my immediate reaction was to blame the RubyGems Dependency API for its poor performance and attempt the &lt;a href=&#34;http://hone.herokuapp.com/bundler%20heroku/2012/10/22/rubygems-and-the-dependency-api.html&#34;&gt;recommended workaround&lt;/a&gt; of switching to &lt;em&gt;&lt;a href=&#34;http://bundler-api.herokuapp.com&#34;&gt;http://bundler-api.herokuapp.com&lt;/a&gt;&lt;/em&gt;. That didn&amp;rsquo;t work.&lt;/p&gt;

&lt;p&gt;I also tried to reproduce the issue on a local environment, including a (what I thought was) a completely clean machine at no avail. My &lt;code&gt;bundle install&lt;/code&gt; would always succeed.&lt;/p&gt;

&lt;p&gt;Finally, everything pointed at an infrastructure problem with Heroku itself, so I opened a ticket (#72648), &lt;a href=&#34;https://twitter.com/dblockdotorg/status/290221530892365824&#34;&gt;tweeted&lt;/a&gt; endlessly to Heroku devs, pinged a  contact at Heroku on Skype and generally annoyed people for 5 straight days. It was a frustrating problem and I was getting no useful help.&lt;/p&gt;

&lt;p&gt;Fast forward, this turned out to be &lt;a href=&#34;https://github.com/carlhuda/bundler/issues/2248&#34;&gt;an issue in Bundler&lt;/a&gt;. Narrowing it down would have been relatively easy if I had known where to look.&lt;/p&gt;

&lt;p&gt;I hope this post helps you with similar issues.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>